<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Belohnungs-Editor - Daily Quest</title>
    <style>
        :root{--p:#4CAF50;--s:#FFC107;--bg:#f5f5f5;--card:#fff;--txt:#333;--border:#ddd}
        [data-theme="dark"]{--p:#66BB6A;--s:#FFD54F;--bg:#121212;--card:#1e1e1e;--txt:#fff;--border:#333}
        [data-theme="minimal"]{--p:#000;--s:#666;--bg:#fff;--card:#fafafa;--txt:#000;--border:#eee}
        [data-theme="ocean"]{--p:#2196F3;--s:#00BCD4;--bg:#E3F2FD;--card:#fff;--txt:#0D47A1;--border:#BBDEFB}
        [data-theme="forest"]{--p:#388E3C;--s:#8BC34A;--bg:#E8F5E8;--card:#fff;--txt:#1B5E20;--border:#C8E6C9}
        *{margin:0;padding:0;box-sizing:border-box}
        body{background:var(--bg);color:var(--txt);font-family:Georgia,serif;padding:2rem;max-width:1000px;margin:0 auto;line-height:1.6;transition:all .3s}
        .h{text-align:center;margin-bottom:3rem}.t{font-size:2.5rem;margin-bottom:.5rem;color:var(--p)}.st{opacity:.8;font-style:italic}
        .n{text-align:center;margin-bottom:2rem;padding-bottom:1rem;border-bottom:1px solid var(--border)}
        .n a{color:var(--txt);text-decoration:none;margin:0 1rem;font-size:.9rem;opacity:.8;transition:all .3s}
        .n a:hover{color:var(--p);opacity:1}
        .editor{background:var(--card);border:1px solid var(--border);padding:2rem;margin-bottom:2rem;border-radius:10px}
        .form-row{margin-bottom:1.5rem}
        .label{display:block;margin-bottom:.5rem;opacity:.9}
        .input,.textarea,.select{width:100%;background:var(--bg);border:1px solid var(--border);color:var(--txt);padding:.7rem;font-family:inherit;border-radius:6px}
        .input:focus,.textarea:focus,.select:focus{outline:none;border-color:var(--p)}
        .textarea{height:80px;resize:vertical}
        .form-grid{display:grid;grid-template-columns:2fr 1fr 1fr;gap:1rem}
        .btn{background:transparent;border:1px solid var(--border);color:var(--txt);padding:.7rem 1.2rem;cursor:pointer;font-family:inherit;border-radius:6px;transition:all .3s}
        .btn:hover{background:var(--p);color:var(--card)}
        .btn.primary{background:var(--p);border-color:var(--p);color:var(--card)}
        .defaults{margin-bottom:2rem}
        .default-item{background:var(--bg);border:1px solid var(--border);padding:1rem;margin-bottom:.5rem;cursor:pointer;border-radius:6px;transition:all .3s}
        .default-item:hover{border-color:var(--p)}
        .rewards-list{margin-bottom:2rem}
        .reward-item{background:var(--card);border:1px solid var(--border);padding:1.5rem;margin-bottom:1rem;border-radius:8px;position:relative}
        .reward-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}
        .reward-name{font-size:1.1rem;color:var(--p)}
        .reward-cost{background:var(--s);color:var(--card);padding:.2rem .6rem;border-radius:12px;font-size:.8rem;font-weight:bold}
        .reward-desc{opacity:.8;margin-bottom:.5rem}
        .reward-meta{font-size:.8rem;opacity:.7;margin-bottom:1rem}
        .delete-btn{background:#f44336;border-color:#f44336;color:white;padding:.4rem .8rem;font-size:.8rem}
        .delete-btn:hover{opacity:.8}
        .stats{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:1rem;margin-bottom:2rem}
        .stat{background:var(--card);border:1px solid var(--border);padding:1rem;text-align:center;border-radius:8px}
        .sv{font-size:1.5rem;color:var(--p);margin-bottom:.3rem}
        .sl{font-size:.8rem;opacity:.8}
        @media(max-width:768px){body{padding:1rem}.form-grid{grid-template-columns:1fr}.stats{grid-template-columns:repeat(2,1fr)}}
    </style>
</head>
<body>
    <nav class="n">
        <a href="quest-shop.html">Zurück zum Shop</a>
    </nav>
    <header class="h">
        <h1 class="t">Belohnungs-Editor</h1>
        <p class="st">Erstelle und verwalte deine benutzerdefinierten Belohnungen</p>
    </header>
    <div class="stats">
        <div class="stat"><div class="sv" id="totalRewards">0</div><div class="sl">Gesamtbelohnungen</div></div>
        <div class="stat"><div class="sv" id="avgCost">0</div><div class="sl">Durchschnittliche Kosten</div></div>
        <div class="stat"><div class="sv" id="categories">0</div><div class="sl">Kategorien</div></div>
    </div>
    <div class="editor">
        <h3>➕ Neue Belohnung hinzufügen</h3>
        <div class="form-row">
            <label class="label">Name der Belohnung</label>
            <input type="text" class="input" id="rewardName" placeholder="Netflix für 1 Monat">
        </div>
        <div class="form-row">
            <label class="label">Beschreibung</label>
            <textarea class="textarea" id="rewardDesc" placeholder="Genieße unbegrenztes Streaming..."></textarea>
        </div>
        <div class="form-grid">
            <div>
                <label class="label">XP-Kosten</label>
                <input type="number" class="input" id="rewardCost" placeholder="1500">
            </div>
            <div>
                <label class="label">Kategorie</label>
                <select class="select" id="rewardCategory">
                    <option value="instant">Sofort</option>
                    <option value="daily">Täglich</option>
                    <option value="weekly">Wöchentlich</option>
                    <option value="monthly">Monatlich</option>
                    <option value="subscription">Abonnement</option>
                    <option value="vip">VIP</option>
                </select>
            </div>
            <div>
                <label class="label">Abklingzeit (Tage)</label>
                <input type="number" class="input" id="rewardCooldown" placeholder="7" value="0">
            </div>
        </div>
        <div class="form-row">
            <label class="label">Freischaltbedingung (optional)</label>
            <input type="text" class="input" id="rewardUnlock" placeholder="Level 10, Serie 30, Erfolg 'Ehrgeizig'">
        </div>
        <button class="btn primary" onclick="ar()">Belohnung hinzufügen</button>
    </div>
    <div class="rewards-list">
        <h3>📋 Deine Belohnungen</h3>
        <div id="rl"></div>
    </div>
    <div class="defaults">
        <h3>💡 Vorgeschlagene Belohnungen nach Kategorie</h3>
        <div id="dr"></div>
    </div>
    <script>
        let si=[];
        const dr={
            instant:[{name:"Lieblingssnack",cost:50,desc:"Gönn dir deinen Lieblingssnack",cooldown:0},{name:"15 Min Pause",cost:75,desc:"Schuldfreie Entspannungszeit",cooldown:0},{name:"Kaffee/Tee-Upgrade",cost:100,desc:"Premium-Kaffee oder besonderer Tee",cooldown:1},{name:"Musikentdeckung",cost:150,desc:"Kaufe ein neues Lied oder Album",cooldown:0},{name:"Schnelle Spiel-Session",cost:200,desc:"30 Minuten spielen",cooldown:0}],
            daily:[{name:"Lieblingsessen",cost:300,desc:"Bestelle oder koche dein Lieblingsgericht",cooldown:1},{name:"Filmabend",cost:400,desc:"Schaue einen Film mit Snacks",cooldown:0},{name:"Bad & Entspannung",cost:250,desc:"Langes entspannendes Bad oder Spa-Zeit",cooldown:2},{name:"Soziale Zeit",cost:350,desc:"Triff dich mit Freunden",cooldown:0},{name:"Hobby-Zeit",cost:500,desc:"2 Stunden für dein Hobby",cooldown:0}],
            weekly:[{name:"Einkaufsbummel",cost:1000,desc:"Schuldfreies Einkaufen im Budget",cooldown:7},{name:"Date Night",cost:1500,desc:"Besonderer Abend zu zweit",cooldown:7},{name:"Wochenendausflug",cost:2000,desc:"Kurzer Ausflug oder Tagesausflug",cooldown:14},{name:"Neues Buch/Spiel",cost:800,desc:"Kaufe etwas, das du schon lange haben wolltest",cooldown:7},{name:"Massage/Spa",cost:1200,desc:"Professionelle Entspannungsbehandlung",cooldown:14}],
            monthly:[{name:"Größere Anschaffung",cost:5000,desc:"Etwas, wofür du gespart hast",cooldown:30},{name:"Wochenendurlaub",cost:8000,desc:"2-3 Tage Reise an einen besonderen Ort",cooldown:60},{name:"Kurs/Workshop",cost:3000,desc:"Investiere in das Erlernen von etwas Neuem",cooldown:30},{name:"Technik-Upgrade",cost:6000,desc:"Neues Gadget oder Geräte-Upgrade",cooldown:90},{name:"Erlebnisgeschenk",cost:4000,desc:"Konzert, Show oder besonderes Event",cooldown:30}],
            subscription:[{name:"Netflix Premium",cost:2000,desc:"1 Monat Premium-Streaming",cooldown:30},{name:"Spotify Premium",cost:1500,desc:"1 Monat werbefreie Musik",cooldown:30},{name:"Fitnessstudio-Mitgliedschaft",cost:3000,desc:"1 Monat Fitness-Zugang",cooldown:30},{name:"Adobe Creative",cost:2500,desc:"1 Monat Kreativ-Tools",cooldown:30},{name:"Essens-Kit-Service",cost:3500,desc:"1 Monat Kochkomfort",cooldown:30}],
            vip:[{name:"Cheat-Day-Pass",cost:1000,desc:"Schuldfreier Genusstag",cooldown:14,unlock:"Serie 14"},{name:"Workout überspringen",cost:500,desc:"Einmaliger Trainingspass",cooldown:7,unlock:"Level 10"},{name:"Fauler Sonntag",cost:800,desc:"Kompletter Entspannungstag",cooldown:21,unlock:"Perfekte Woche"},{name:"VIP-Behandlung",cost:5000,desc:"Ultimatives Luxuserlebnis",cooldown:90,unlock:"Level 25"},{name:"Traumkauf",cost:15000,desc:"Etwas ganz Besonderes",cooldown:180,unlock:"Serie 100"}]
        };
        function at(){const s=JSON.parse(localStorage.getItem('questSettings')||'{}');if(s.theme)document.documentElement.setAttribute('data-theme',s.theme);}
        function ld(){let saved=localStorage.getItem('bq-shop');if(saved){si=JSON.parse(saved);}else{si=[];}us();rr();rd();}
        function sv(){localStorage.setItem('bq-shop',JSON.stringify(si));}
        function us(){document.getElementById('totalRewards').textContent=si.length;const avg=si.length>0?Math.round(si.reduce((s,i)=>s+i.cost,0)/si.length):0;document.getElementById('avgCost').textContent=avg;const cats=new Set(si.map(i=>i.category));document.getElementById('categories').textContent=cats.size;}
        function rr(){const c=document.getElementById('rl');if(si.length===0){c.innerHTML='<div style="text-align:center;opacity:.6;padding:2rem;">Noch keine Belohnungen erstellt. Füge unten welche hinzu!</div>';return;}c.innerHTML=si.map(i=>`<div class="reward-item"><div class="reward-header"><h4 class="reward-name">${i.name}</h4><span class="reward-cost">${i.cost} XP</span></div><div class="reward-desc">${i.desc}</div><div class="reward-meta">📂 ${i.category.charAt(0).toUpperCase()+i.category.slice(1)} ${i.cooldown>0?`• ⏰ ${i.cooldown} Tage Abklingzeit`:'• ✨ Keine Abklingzeit'}${i.unlock?`• 🔐 ${i.unlock}`:''}</div><button class="btn delete-btn" onclick="del('${i.id}')">Löschen</button></div>`).join('');}
        function rd(){const c=document.getElementById('dr');c.innerHTML=Object.entries(dr).map(([cat,items])=>`<div style="margin-bottom:2rem;"><h4 style="margin:1rem 0;color:var(--p);">${cat.charAt(0).toUpperCase()+cat.slice(1)} Belohnungen</h4>${items.map(i=>`<div class="default-item" onclick="ad('${cat}',${JSON.stringify(i).replace(/"/g,'&quot;')})"><strong>${i.name}</strong> - ${i.cost} XP<br><small style="opacity:.8;">${i.desc}</small></div>`).join('')}</div>`).join('');}
        function ar(){const name=document.getElementById('rewardName').value;const desc=document.getElementById('rewardDesc').value;const cost=parseInt(document.getElementById('rewardCost').value);const category=document.getElementById('rewardCategory').value;const cooldown=parseInt(document.getElementById('rewardCooldown').value)||0;const unlock=document.getElementById('rewardUnlock').value;if(!name||!desc||!cost){alert('Bitte fülle alle erforderlichen Felder aus');return;}const nr={id:Date.now()+Math.random(),name,desc,cost,category,cooldown,unlock:unlock||null,purchased:[],lastPurchased:null};si.push(nr);sv();us();rr();document.getElementById('rewardName').value='';document.getElementById('rewardDesc').value='';document.getElementById('rewardCost').value='';document.getElementById('rewardCooldown').value='0';document.getElementById('rewardUnlock').value='';alert(`Belohnung "${name}" erfolgreich hinzugefügt!`);}
        function ad(cat,item){const nr={id:Date.now()+Math.random(),name:item.name,desc:item.desc,cost:item.cost,category:cat,cooldown:item.cooldown||0,unlock:item.unlock||null,purchased:[],lastPurchased:null};si.push(nr);sv();us();rr();alert(`"${item.name}" zu deinen Belohnungen hinzugefügt!`);}
        function del(id){if(confirm('Diese Belohnung löschen?')){si=si.filter(i=>i.id!==id);sv();us();rr();}}
        at();ld();
    </script>
</body>
</html>